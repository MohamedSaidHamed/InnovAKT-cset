<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://wixtoolset.org/schemas/v4/wxs"
     xmlns:bal="http://wixtoolset.org/schemas/v4/wxs/bal">

  <!-- Simple Bundle Definition - Creates the bootstrapper executable -->
  <Bundle Name="InnovAKT-CSET Standalone Installer" 
          Version="12.5.0.0" 
          Manufacturer="InnovAKT"
          UpgradeCode="B2C3D4E5-F6A7-5678-9012-ABCDEF123456">

    <!-- Bundle Variables -->
    <Variable Name="InstallFolder" Type="string" Value="[ProgramFiles64Folder]InnovAKT-CSET\" />

    <!-- Simple Bootstrap Application (silent install) -->
    <BootstrapperApplication Name="InnovAKT-CSET Installer">
      <bal:WixStandardBootstrapperApplication 
        LicenseFile="License.rtf"
        Name="InnovAKT-CSET Installer"
        Theme="none" />
    </BootstrapperApplication>

    <!-- Simple Chain of Packages - Install all prerequisites then main app -->
    <Chain>
      
      <!-- 1. SQL Server LocalDB 2022 - Always try to install -->
      <MsiPackage Id="SqlLocalDB2022Msi"
                  SourceFile="downloads\SqlLocalDB2022.msi"
                  DisplayName="Microsoft SQL Server 2022 LocalDB"
                  Permanent="yes"
                  Vital="no" />
      
      <!-- 2. .NET 7 Runtime - Always try to install -->
      <ExePackage Id="NetFramework70Exe"
                  SourceFile="downloads\windowsdesktop-runtime-7.0.20-win-x64.exe"
                  DisplayName="Microsoft .NET 7.0 Runtime"
                  InstallArguments="/quiet /norestart"
                  UninstallArguments="/quiet /norestart"
                  Permanent="yes"
                  Vital="no" />
      
      <!-- 3. ASP.NET Core 7 Runtime - Always try to install -->
      <ExePackage Id="AspNetCore70Exe"
                  SourceFile="downloads\aspnetcore-runtime-7.0.20-win-x64.exe"
                  DisplayName="Microsoft ASP.NET Core 7.0 Runtime"
                  InstallArguments="/quiet /norestart"
                  UninstallArguments="/quiet /norestart"
                  Permanent="yes"
                  Vital="no" />
      
      <!-- 4. Main Application -->
      <MsiPackage Id="InnovAKTCSETMsi" 
                  SourceFile="InnovAKT-CSET.msi" 
                  DisplayName="InnovAKT-CSET Application"
                  Vital="yes">
        <MsiProperty Name="INSTALLFOLDER" Value="[InstallFolder]" />
      </MsiPackage>

    </Chain>

  </Bundle>

</Wix>